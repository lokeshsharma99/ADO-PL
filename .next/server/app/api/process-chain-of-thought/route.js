(()=>{var e={};e.id=561,e.ids=[561],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9445:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>y,routeModule:()=>h,serverHooks:()=>f,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>d});var o={};r.r(o),r.d(o,{POST:()=>c});var s=r(2706),n=r(8203),a=r(5994),i=r(9187);async function c(e){try{let{searchResults:t,contentType:r,topic:o}=await e.json(),s=await l(t),n=await p(s,r),a=await u(n,r,o);return i.NextResponse.json({relevantPoints:s,summary:n,suggestedContent:a,references:t.map(e=>({title:e.title,url:e.url}))})}catch(e){return console.error("Error in chain of thought processing:",e),i.NextResponse.json({error:"Failed to process content"},{status:500})}}async function l(e){if(0===e.length)return[];try{let t=await fetch("https://api.mistral.ai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${process.env.MISTRAL_API_KEY}`},body:JSON.stringify({model:"mistral-medium",messages:[{role:"system",content:"You are an expert at analyzing and extracting key points from search results."},{role:"user",content:`Analyze these search results and extract the most relevant points:
${e.map(e=>`${e.title}
${e.description}
${e.url}
`).join("\n")}`}],temperature:.3,max_tokens:1e3})});if(!t.ok){let e=await t.json().catch(()=>({}));throw console.error("API error:",e),Error("Failed to analyze search results")}let r=await t.json();if(!r.choices?.[0]?.message?.content)throw Error("Invalid response format from Mistral API");return r.choices[0].message.content.split("\n").filter(e=>!!e).map(e=>e.trim())}catch(e){return console.error("Error analyzing search results:",e),[]}}async function p(e,t){if(0===e.length)return"No relevant information found.";try{let r=await fetch("https://api.mistral.ai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${process.env.MISTRAL_API_KEY}`},body:JSON.stringify({model:"mistral-medium",messages:[{role:"system",content:"You are an expert at synthesizing information into coherent summaries."},{role:"user",content:`Synthesize these key points into a coherent summary suitable for a ${t}:
${e.join("\n")}`}],temperature:.4,max_tokens:1e3})});if(!r.ok){let e=await r.json().catch(()=>({}));throw console.error("API error:",e),Error("Failed to synthesize information")}let o=await r.json();if(!o.choices?.[0]?.message?.content)throw Error("Invalid response format from Mistral API");return o.choices[0].message.content.trim()}catch(e){return console.error("Error synthesizing information:",e),"Failed to synthesize information."}}async function u(e,t,r){let o=`Based on this summary about ${r}:
${e}

Create ${{blog:"a detailed blog post with clear sections, examples, and practical insights",news:"a news article following the inverted pyramid style, with key information first",announcement:"a clear, concise announcement with key points and next steps"}[t]}. The content should:
1. Follow GOV.UK style guidelines
2. Be clear and accessible
3. Include relevant facts and figures
4. Provide practical information
5. End with clear next steps or calls to action

The tone should be professional but approachable, and the content should be structured for easy reading.`,s=await fetch("https://api.mistral.ai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${process.env.MISTRAL_API_KEY}`},body:JSON.stringify({model:"mistral-small-latest",messages:[{role:"user",content:o}],temperature:.5})});return(await s.json()).choices[0].message.content.trim()}let h=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/process-chain-of-thought/route",pathname:"/api/process-chain-of-thought",filename:"route",bundlePath:"app/api/process-chain-of-thought/route"},resolvedPagePath:"C:\\Users\\Lokesh-PC\\Downloads\\ADO PL\\app\\api\\process-chain-of-thought\\route.ts",nextConfigOutput:"standalone",userland:o}),{workAsyncStorage:m,workUnitAsyncStorage:d,serverHooks:f}=h;function y(){return(0,a.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:d})}},6487:()=>{},8335:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[994,452],()=>r(9445));module.exports=o})();