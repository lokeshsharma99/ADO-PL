(()=>{var e={};e.id=437,e.ids=[437],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9555:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>v,routeModule:()=>p,serverHooks:()=>h,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>d});var s={};t.r(s),t.d(s,{POST:()=>c});var a=t(2706),o=t(8203),n=t(5994),i=t(9187);let u=process.env.BRAVE_API_KEY;async function c(e){try{let{query:r}=await e.json();if(!r?.trim())return i.NextResponse.json({error:"Query parameter is required"},{status:400});if(!u)return i.NextResponse.json({error:"Brave Search API key is not configured"},{status:500});let t=new URLSearchParams({q:`site:gov.uk ${r.trim()}`,count:"10",format:"json",safesearch:"moderate"});console.log("Searching Brave with query:",t.toString());let s=await fetch(`https://api.search.brave.com/res/v1/web/search?${t.toString()}`,{method:"GET",headers:{Accept:"application/json","X-Subscription-Token":u}});if(!s.ok){let e=await s.text();return console.error("Brave Search API error:",{status:s.status,statusText:s.statusText,headers:Object.fromEntries(s.headers.entries()),error:e}),i.NextResponse.json({error:`Failed to fetch from Brave Search: ${s.statusText}`},{status:s.status})}let a=await s.json();if(console.log("Brave Search response:",JSON.stringify(a,null,2)),!a.web?.results)return console.warn("No results found in Brave Search response"),i.NextResponse.json({results:[],message:"No results found for the given query"});let o=a.web.results.map(e=>({title:e.title||"Untitled",description:e.description||"No description available",url:e.url||"",image:e.image?.url||null}));return i.NextResponse.json({results:o,total:o.length,query:r.trim()})}catch(e){return console.error("Error in Brave Search API route:",e),i.NextResponse.json({error:e instanceof Error?e.message:"Internal server error"},{status:500})}}u||console.warn("BRAVE_API_KEY is not set in environment variables");let p=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/brave-search/route",pathname:"/api/brave-search",filename:"route",bundlePath:"app/api/brave-search/route"},resolvedPagePath:"C:\\Users\\Lokesh-PC\\Downloads\\ADO PL\\app\\api\\brave-search\\route.ts",nextConfigOutput:"export",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:d,serverHooks:h}=p;function v(){return(0,n.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:d})}},6487:()=>{},8335:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[994,452],()=>t(9555));module.exports=s})();